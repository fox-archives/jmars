<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="build" name="JMARS">
	<property environment="env"/>
	<property name="debuglevel" value="source,lines,vars"/>
	<property name="target" value="1.5"/>
	<property name="source" value="1.5"/>
	<property name="build_dir" value=".ant_build"/>
	<path id="JMARS.classpath">
		<pathelement location="${build_dir}"/>
		<pathelement location="lib/BrowserLauncher2-1_3.jar"/>
		<pathelement location="lib/commons-codec-1.3.jar"/>
		<pathelement location="lib/commons-collections-2.1.1.jar"/>
		<pathelement location="lib/commons-httpclient-3.1-rc1.jar"/>
		<pathelement location="lib/commons-logging-1.1.1.jar"/>
		<pathelement location="lib/commons-beanutils-1.7.0.jar"/>
		<pathelement location="lib/cookformlayout-1.1.jar"/>
		<pathelement location="lib/cookswing-1.5.jar"/>
		<pathelement location="lib/cookxml-3.0.1.jar"/>
		<pathelement location="lib/dom4j-1.6.1.jar"/>
		<pathelement location="lib/forms-1.1.0.jar"/>
		<pathelement location="lib/hsqldb-1.8.0_10.jar"/>
		<pathelement location="lib/javacsv.jar"/>
		<pathelement location="lib/jaxen-1.1-beta-6.jar"/>
		<pathelement location="lib/jcommon-1.0.10.jar"/>
		<pathelement location="lib/jfreechart-1.0.6.jar"/>
		<pathelement location="lib/mysql-connector-java-5.1.5-bin.jar"/>
		<pathelement location="lib/openmap-4.6.5.jar"/>
		<pathelement location="lib/postgresql-8.0-311.jdbc2.jar"/>
		<pathelement location="lib/stampserver.jar"/>
		<pathelement location="lib/swingx-1.0.jar"/>
		<pathelement location="lib/trove.zip"/>
		<pathelement location="lib/xstream-1.4.2.jar"/>
		<pathelement location="lib/xmlpull-1.1.3.1.jar"/>
		<pathelement location="lib/xpp3_min-1.1.4c.jar"/>
		<pathelement location="lib/backport-util-concurrent-3.0.jar"/>
		<pathelement location="lib/ehcache-1.4.0-beta2.jar"/>
		<pathelement location="lib/ehcache-constructs-0.7.3.jar"/>
		<pathelement location="lib/jsr107cache-1.0.jar"/>
        <pathelement location="lib/jaxb-impl.jar"/>
		<pathelement location="lib/jsr173_1.0_api.jar"/>
        <pathelement location="lib/JavaAPIforKml.jar"/>
        <pathelement location="lib/jaxb-api.jar"/>
        <pathelement location="lib/activation.jar"/>
		<pathelement location="lib/jts-1.11.jar"/>
		<pathelement location="lib/geoapi-2.7.1.jar"/>
		<pathelement location="lib/gt-main-2.7.1.jar"/>
		<pathelement location="lib/gt-metadata-2.7.1.jar"/>
		<pathelement location="lib/gt-referencing-2.7.1.jar"/>
		<pathelement location="lib/gt-shapefile-2.7.1.jar"/>
		<pathelement location="lib/gt-epsg-wkt-2.7.1.jar"/>
		<pathelement location="lib/gt-data-2.7.1.jar"/>
		<pathelement location="lib/jsr-275-1.0-beta-2.jar"/>
		<pathelement location="lib/vecmath-1.3.2.jar"/>
		<pathelement location="lib/jai_imageio-1.1.jar"/>
		<pathelement location="lib/jai_codec-1.1.3.jar"/>
		<pathelement location="lib/jai_core-1.1.3.jar"/>
		<pathelement location="lib/je-4.0.103.jar"/>
		<pathelement location="lib/jel-2.0.1.jar"/>
		<pathelement location="lib/junit.zip"/>
	</path>
	<target name="init">
		<mkdir dir="${build_dir}"/>
		<copy includeemptydirs="false" todir="${build_dir}">
			<fileset dir="." includes="resources/*, images/*"/>
		</copy>
	</target>
	<target name="clean">
		<delete dir="${build_dir}"/>
	</target>
	<target depends="build-project" name="build"/>
	<target depends="init" name="build-project">
		<echo message="${ant.project.name}: ${ant.file}"/>
		<exec executable="bash">
			<arg value="util/build_config.sh"/>
			<arg value="${build_dir}"/>
			<arg value="-DMRO=1"/>
			<arg value="-DSKIPABOUT=1"/>
		</exec>
		<javac fork="yes" executable="javac" compiler="javac1.5" debug="true" debuglevel="${debuglevel}" destdir="${build_dir}" source="${source}" target="${target}">
			<src path="edu"/>
			<src path="util"/>
			<classpath refid="JMARS.classpath"/>
		</javac>
		<taskdef name="BuildAbout" classname="edu.asu.jmars.BuildAbout">
			<classpath refid="JMARS.classpath"/>
		</taskdef>
		<BuildAbout aboutPath="resources/about.txt" buildPath="${build_dir}"/>
	</target>
	<target depends="build-project" name="run">
		<java classname="edu.asu.jmars.Main" failonerror="true" fork="yes">
			<jvmarg line="-Xmx1024M"/>
			<classpath refid="JMARS.classpath"/>
		</java>
	</target>
	<target depends="build-project" name="jar">
		<pathconvert pathsep="," property="depjars" refid="JMARS.classpath"/>
		<jar destfile="jmars.jar" manifest="manifest">
			<fileset dir="${build_dir}"/>
			<zipgroupfileset dir="." includes="lib/BrowserLauncher2-1_3.jar, lib/commons-codec-1.3.jar, lib/commons-collections-2.1.1.jar, lib/commons-httpclient-3.1-rc1.jar, lib/commons-logging-1.1.1.jar, lib/commons-beanutils-1.7.0.jar, lib/cookformlayout-1.1.jar, lib/cookswing-1.5.jar, lib/cookxml-3.0.1.jar, lib/dom4j-1.6.1.jar, lib/forms-1.1.0.jar, lib/hsqldb-1.8.0_10.jar, lib/javacsv.jar, lib/jaxen-1.1-beta-6.jar, lib/jcommon-1.0.10.jar, lib/jfreechart-1.0.6.jar, lib/mysql-connector-java-5.1.5-bin.jar, lib/openmap-4.6.5.jar, lib/postgresql-8.0-311.jdbc2.jar, lib/stampserver.jar, lib/swingx-1.0.jar, lib/trove.zip, lib/xstream-1.3.1.jar, lib/xpp3_min-1.1.4c.jar, lib/backport-util-concurrent-3.0.jar, lib/ehcache-1.4.0-beta2.jar, lib/ehcache-constructs-0.7.3.jar, lib/jsr107cache-1.0.jar, lib/jaxb-impl.jar, lib/jsr173_1.0_api.jar, lib/JavaAPIforKml.jar, lib/jaxb-api.jar, lib/activation.jar, lib/jts-1.11.jar, lib/gt-api-2.7.1.jar, lib/gt-main-2.7.1.jar, lib/gt-metadata-2.7.1.jar, lib/gt-referencing-2.7.1.jar, lib/gt-shapefile-2.7.1.jar, lib/gt-epsg-wkt-2.7.1.jar, lib/gt-data-2.7.1.jar, lib/jsr275-1.0-beta-2.jar, lib/vecmath-1.3.2.jar, lib/jai_imageio-1.1.jar, lib/jai_codec-1.1.3.jar, lib/jai_core-1.1.3.jar, lib/je-4.0.103.jar, lib/jel-2.0.1.jar"/>
		</jar>
	</target>
</project>
